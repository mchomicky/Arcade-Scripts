var x = FeatureSetByRelationShipName($feature, "MasterList", ['*'], false)

var total = 0;

var summerKWD = {
        "i50":2.5,
        "i100":2.6,
        "i150":2.7,
        "i200":2.8,
        "i250":2.8,
        "i300":2.9,
        "i350":3,
        "i400":3.1,
        "i450":3.1,
        "i500":3.2,
        "i550":3.3,
        "i600":3.4,
        "i650":3.4,
        "i700":3.5,
        "i750":3.5,
        "i800":3.7,
        "i850":3.9,
        "i900":4.1,
        "i950":4.3,
        "i1000":4.5,
        "i1050":4.7,
        "i1100":4.9,
        "i1150":5.1,
        "i1200":5.3,
        "i1250":5.5,
        "i1300":5.7,
        "i1350":5.9,
        "i1400":6.1,
        "i1450":6.2,
        "i1500":6.2,
        "i1550":6.3,
        "i1600":6.3,
        "i1650":6.4,
        "i1700":6.4,
        "i1750":6.5,
        "i1800":6.5,
        "i1850":6.6,
        "i1900":6.6,
        "i1950":6.7,
        "i2000":6.7,
        "i2050":6.8,
        "i2100":6.8,
        "i2150":6.9,
        "i2200":6.9,
        "i2250":7,
        "i2300":7,
        "i2350":7.1,
        "i2400":7.3,
        "i2450":7.5,
        "i2500":7.7,
        "i2550":7.9,
        "i2600":8.2,
        "i2650":8.4,
        "i2700":8.6,
        "i2750":8.8,
        "i2800":9,
        "i2850":9.3,
        "i2900":9.5,
        "i2950":9.7,
        "i3000":9.9,
        "i3050":10.1,
        "i3100":10.4,
        "i3150":10.6,
        "i3200":10.8,
        "i3250":11,
        "i3300":11.2,
        "i3350":11.5,
        "i3400":11.7,
        "i3450":11.9,
        "i3500":11.9,
        "i3550":12.1,
        "i3600":12.4,
        "i3650":12.6,
        "i3700":12.9,
        "i3750":13.1,
        "i3800":13.4,
        "i3850":13.6,
        "i3900":14,
        "i3950":14.1,
        "i4000":14.2,
        "i4050":14.3,
        "i4100":14.4,
        "i4150":14.5,
        "i4200":14.6,
        "i4250":14.7,
        "i4300":14.8,
        "i4350":14.9,
        "i4400":15,
        "i4450":15.1,
        "i4500":15.2,
        "i4550":15.3,
        "i4600":15.4,
        "i4650":15.5,
        "i4700":15.6,
        "i4750":15.7,
        "i4800":15.8,
        "i4850":16.1,
        "i4900":16.3,
        "i4950":16.4,
        "i5000":16.6,
        "i5050":16.8,
        "i5100":16.8,
        "i5150":16.9,
        "i5200":17,
        "i5250":17.1,
        "i5300":17.2,
        "i5350":17.3,
        "i5400":17.4,
        "i5450":17.5,
        "i5500":17.6,
        "i5550":17.7,
        "i5600":17.8,
        "i5650":17.9,
        "i5700":18,
        "i5750":18.1,
        "i5800":18.2,
        "i5850":18.3,
        "i5900":18.4,
        "i5950":18.5,
        "i6000":18.6,
        "i6050":18.8,
        "i6100":19,
        "i6150":19.2,
        "i6200":19.4,
        "i6250":19.6,
        "i6300":19.8,
        "i6350":20,
        "i6400":20.2,
        "i6450":20.4,
        "i6500":20.6,
        "i6550":20.8,
        "i6600":21,
        "i6650":21.2,
        "i6700":21.4,
        "i6750":21.6,
        "i6800":21.8,
        "i6850":22,
        "i6900":22.2,
        "i6950":22.4,
        "i7000":22.6,
        "i7050":22.8,
        "i7100":23,
        "i7150":23.2,
        "i7200":23.4,
        "i7250":23.6,
        "i7300":23.8,
        "i7350":24,
        "i7400":24.2,
        "i7450":24.4,
        "i7500":24.6,
        "i7550":24.8,
        "i7600":25,
        "i7650":25.2,
        "i7700":25.4,
        "i7750":25.6,
        "i7800":25.8,
        "i7850":26,
        "i7900":26.2,
        "i7950":26.4,
        "i8000":26.6,
        "i8050":26.8,
        "i8100":27,
        "i8150":27.2,
        "i8200":27.4,
        "i8250":27.6,
        "i8300":27.8,
        "i8350":28,
        "i8400":28.2,
        "i8450":28.4,
        "i8500":28.6,
        "i8550":28.8,
        "i8600":29,
        "i8650":29.2,
        "i8700":29.4,
        "i8750":29.6,
        "i8800":29.8,
        "i8850":30,
        "i8900":30.2,
        "i8950":30.4,
        "i9000":30.6,
        "i9050":30.8,
        "i9100":31,
        "i9150":31.2,
        "i9200":31.4,
        "i9250":31.6,
        "i9300":31.8,
        "i9350":32,
        "i9400":32.2,
        "i9450":32.4,
        "i9500":32.6,
        "i9550":32.8,
        "i9600":33,
        "i9650":33.2,
        "i9700":33.4,
        "i9750":33.6,
        "i9800":33.8,
        "i9850":34,
        "i9900":34.2,
        "i9950":34.4,
        "i10000":34.6,
        "i10050":34.8,
        "i10100":35,
        "i10150":35.2,
        "i10200":35.4,
        "i10250":35.6,
        "i10300":35.8,
        "i10350":36,
        "i10400":36.2,
        "i10450":36.4,
        "i10500":36.6,
        "i10550":36.8,
        "i10600":37,
        "i10650":37.2,
        "i10700":37.4,
        "i10750":37.6,
        "i10800":37.8,
        "i10850":38,
        "i10900":38.2,
        "i10950":38.4,
        "i11000":38.6,
        "i11050":38.8,
        "i11100":39,
        "i11150":39.2,
        "i11200":39.4,
        "i11250":39.6,
        "i11300":39.8,
        "i11350":40,
        "i11400":40.2,
        "i11450":40.4,
        "i11500":40.6,
        "i11550":40.8,
        "i11600":41,
        "i11650":41.2,
        "i11700":41.4,
        "i11750":41.6,
        "i11800":41.8,
        "i11850":42,
        "i11900":42.2,
        "i11950":42.4,
        "i12000":42.6,
        "i12050":42.8,
        "i12100":43,
        "i12150":43.2,
        "i12200":43.4,
        "i12250":43.6,
        "i12300":43.8,
        "i12350":44,
        "i12400":44.2,
        "i12450":44.4,
        "i12500":44.6,
        "i12550":44.8,
        "i12600":45,
        "i12650":45.2,
        "i12700":45.4,
        "i12750":45.6,
        "i12800":45.8,
        "i12850":46,
        "i12900":46.2,
        "i12950":46.4,
        "i13000":46.6,
        "i13050":46.8,
        "i13100":47,
        "i13150":47.2,
        "i13200":47.4,
        "i13250":47.6,
        "i13300":47.8,
        "i13350":48,
        "i13400":48.2,
        "i13450":48.4,
        "i13500":48.6,
        "i13550":48.8,
        "i13600":49,
        "i13650":49.2,
        "i13700":49.4,
        "i13750":49.6,
        "i13800":49.8,
        "i13850":50,
        "i13900":50.2,
        "i13950":50.4,
        "i14000":50.6,
        "i14050":50.8,
        "i14100":51,
        "i14150":51.2,
        "i14200":51.4,
        "i14250":51.6,
        "i14300":51.8,
        "i14350":52,
        "i14400":52.2,
        "i14450":52.4,
        "i14500":52.6,
        "i14550":52.8,
        "i14600":53,
        "i14650":53.2,
        "i14700":53.4,
        "i14750":53.6,
        "i14800":53.8,
        "i14850":54,
        "i14900":54.2,
        "i14950":54.4,
        "i15000":54.6,
        "i15050":54.8,
        "i15100":55,
        "i15150":55.2,
        "i15200":55.4,
        "i15250":55.6,
        "i15300":55.8,
        "i15350":56,
        "i15400":56.2,
        "i15450":56.4,
        "i15500":56.6,
        "i15550":56.8,
        "i15600":57,
        "i15650":57.2,
        "i15700":57.4,
        "i15750":57.6,
        "i15800":57.8,
        "i15850":58,
        "i15900":58.2,
        "i15950":58.4,
        "i16000":58.6,
        "i16050":58.8,
        "i16100":59,
        "i16150":59.2,
        "i16200":59.4,
        "i16250":59.6,
        "i16300":59.8,
        "i16350":60,
        "i16400":60.2,
        "i16450":60.4,
        "i16500":60.6,
        "i16550":60.8,
        "i16600":61,
        "i16650":61.2,
        "i16700":61.4,
        "i16750":61.6,
        "i16800":61.8,
        "i16850":62,
        "i16900":62.2,
        "i16950":62.4,
        "i17000":62.6,
        "i17050":62.8,
        "i17100":63,
        "i17150":63.2,
        "i17200":63.4,
        "i17250":63.6,
        "i17300":63.8,
        "i17350":64,
        "i17400":64.2,
        "i17450":64.4,
        "i17500":64.6,
        "i17550":64.8,
        "i17600":65,
        "i17650":65.2,
        "i17700":65.4,
        "i17750":65.6,
        "i17800":65.8,
        "i17850":66,
        "i17900":66.2,
        "i17950":66.4,
        "i18000":66.6,
        "i18050":66.8,
        "i18100":67,
        "i18150":67.2,
        "i18200":67.4,
        "i18250":67.6,
        "i18300":67.8,
        "i18350":68,
        "i18400":68.2,
        "i18450":68.4,
        "i18500":68.6,
        "i18550":68.8,
        "i18600":69,
        "i18650":69.2,
        "i18700":69.4,
        "i18750":69.6,
        "i18800":69.8,
        "i18850":70,
        "i18900":70.2,
        "i18950":70.4,
        "i19000":70.6,
        "i19050":70.8,
        "i19100":71,
        "i19150":71.2,
        "i19200":71.4,
        "i19250":71.6,
        "i19300":71.8,
        "i19350":72,
        "i19400":72.2,
        "i19450":72.4,
        "i19500":72.6,
        "i19550":72.8,
        "i19600":73,
        "i19650":73.2,
        "i19700":73.4,
        "i19750":73.6,
        "i19800":73.8,
        "i19850":74,
        "i19900":74.2,
        "i19950":74.4,
        "i20000":74.6,
        "i20050":74.8,
        "i20100":75,
        "i20150":75.2,
        "i20200":75.4,
        "i20250":75.6,
        "i20300":75.8,
        "i20350":76,
        "i20400":76.2,
        "i20450":76.4,
        "i20500":76.6,
        "i20550":76.8,
        "i20600":77,
        "i20650":77.2,
        "i20700":77.4,
        "i20750":77.6,
        "i20800":77.8,
        "i20850":78,
        "i20900":78.2,
        "i20950":78.4,
        "i21000":78.6,
        "i21050":78.8,
        "i21100":79,
        "i21150":79.2,
        "i21200":79.4,
        "i21250":79.6,
        "i21300":79.8,
        "i21350":80,
        "i21400":80.2,
        "i21450":80.4,
        "i21500":80.6,
        "i21550":80.8,
        "i21600":81,
        "i21650":81.2,
        "i21700":81.4,
        "i21750":81.6,
        "i21800":81.8,
        "i21850":82,
        "i21900":82.2,
        "i21950":82.4,
        "i22000":82.6,
        "i22050":82.8,
        "i22100":83,
        "i22150":83.2,
        "i22200":83.4,
        "i22250":83.6,
        "i22300":83.8,
        "i22350":84,
        "i22400":84.2,
        "i22450":84.4,
        "i22500":84.6,
        "i22550":84.8,
        "i22600":85,
        "i22650":85.2,
        "i22700":85.4,
        "i22750":85.6,
        "i22800":85.8,
        "i22850":86,
        "i22900":86.2,
        "i22950":86.4,
        "i23000":86.6,
        "i23050":86.8,
        "i23100":87,
        "i23150":87.2,
        "i23200":87.4,
        "i23250":87.6,
        "i23300":87.8,
        "i23350":88,
        "i23400":88.2,
        "i23450":88.4,
        "i23500":88.6,
        "i23550":88.8,
        "i23600":89,
        "i23650":89.2,
        "i23700":89.4,
        "i23750":89.6,
        "i23800":89.8,
        "i23850":90,
        "i23900":90.2,
        "i23950":90.4,
        "i24000":90.6,
        "i24050":90.8,
        "i24100":91,
        "i24150":91.2,
        "i24200":91.4,
        "i24250":91.6,
        "i24300":91.8,
        "i24350":92,
        "i24400":92.2,
        "i24450":92.4,
        "i24500":92.6,
        "i24550":92.8,
        "i24600":93,
        "i24650":93.2,
        "i24700":93.4,
        "i24750":93.6,
        "i24800":93.8,
        "i24850":94,
        "i24900":94.2,
        "i24950":94.4,
        "i25000":94.6,
        "i25050":94.8,
        "i25100":95,
        "i25150":95.2,
        "i25200":95.4,
        "i25250":95.6,
        "i25300":95.8,
        "i25350":96,
        "i25400":96.2,
        "i25450":96.4,
        "i25500":96.6,
        "i25550":96.8,
        "i25600":97,
        "i25650":97.2,
        "i25700":97.4,
        "i25750":97.6,
        "i25800":97.8,
        "i25850":98,
        "i25900":98.2,
        "i25950":98.4,
        "i26000":98.6,
        "i26050":98.8,
        "i26100":99,
        "i26150":99.2,
        "i26200":99.4,
        "i26250":99.6,
        "i26300":99.8,
        "i26350":100,
        "i26400":100.2,
        "i26450":100.4,
        "i26500":100.6,
        "i26550":100.8,
        "i26600":101,
        "i26650":101.2,
        "i26700":101.4,
        "i26750":101.6,
        "i26800":101.8,
        "i26850":102,
        "i26900":102.2,
        "i26950":102.4,
        "i27000":102.6,
        "i27050":102.8,
        "i27100":103,
        "i27150":103.2,
        "i27200":103.4,
        "i27250":103.6,
        "i27300":103.8,
        "i27350":104,
        "i27400":104.2,
        "i27450":104.4,
        "i27500":104.6,
        "i27550":104.8,
        "i27600":105,
        "i27650":105.2,
        "i27700":105.4,
        "i27750":105.6,
        "i27800":105.8,
        "i27850":106,
        "i27900":106.2,
        "i27950":106.4,
        "i28000":106.6,
        "i28050":106.8,
        "i28100":107,
        "i28150":107.2,
        "i28200":107.4,
        "i28250":107.6,
        "i28300":107.8,
        "i28350":108,
        "i28400":108.2,
        "i28450":108.4,
        "i28500":108.6,
        "i28550":108.8,
        "i28600":109,
        "i28650":109.2,
        "i28700":109.4,
        "i28750":109.6,
        "i28800":109.8,
        "i28850":110,
        "i28900":110.2,
        "i28950":110.4,
        "i29000":110.6,
        "i29050":110.8,
        "i29100":111,
        "i29150":111.2,
        "i29200":111.4,
        "i29250":111.6,
        "i29300":111.8,
        "i29350":112,
        "i29400":112.2,
        "i29450":112.4,
        "i29500":112.6,
        "i29550":112.8,
        "i29600":113,
        "i29650":113.2,
        "i29700":113.4,
        "i29750":113.6,
        "i29800":113.8,
        "i29850":114,
        "i29900":114.2,
        "i29950":114.4,
        "i30000":114.6
}

var summerDiversity = {
    "i1":1,
    "i2":0.9769,
    "i3":0.959,
    "i4":0.9385,
    "i5":0.9169,
    "i6":0.8974,
    "i7":0.8791,
    "i8":0.8577,
    "i9":0.8376,
    "i10":0.8185,
    "i11":0.7972,
    "i12":0.7782,
    "i13":0.7657,
    "i14":0.7571,
    "i15":0.7508,
    "i16":0.7442,
    "i17":0.7394,
    "i18":0.7359,
    "i19":0.732,
    "i20":0.7292
}

for (var meter in x) {
    var kwh = meter['Summer_kWH_past_yr']
    if (kwh>30000) {
        kwh=30000
    }
    
    else if (kwh==0){
        kwh=50
        
    }

    var n = kwh % 50
    if (n == 0) {
        total += summerKWD[`i${kwh}`]
    } else {
        kwh = kwh + (50 - n)
        total += summerKWD[`i${kwh}`]
    }
}

var numCustomers = Count(x)

var diversity = summerDiversity[`i${numCustomers}`]

total * diversity
